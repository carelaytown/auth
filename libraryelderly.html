<!-- 完全版コード記述開始 -->
<!-- CARELAYタウン アプリ共通開発ルールに準拠 -->
<!-- HTML構造は含めず、mainに読み込む前提 -->

<!-- タイトル・注釈 -->
<div class="text-xl font-bold mb-2">介護事業所検索（高齢者）</div>
<p class="text-sm text-gray-600 mb-4">※都道府県・市区町村・サービスの種類を選択して検索してください。</p>

<!-- フィルター -->
<div id="filters" class="flex flex-wrap gap-2 items-end mb-4">
  <select id="prefecture" class="p-2 border rounded w-40">
    <option value="">都道府県</option>
  </select>
  <select id="city" class="p-2 border rounded w-40">
    <option value="">市区町村</option>
  </select>
  <select id="service" class="p-2 border rounded w-40">
    <option value="">サービス種別</option>
  </select>
  <button id="searchBtn" class="px-4 py-2 bg-blue-500 text-white rounded">表示</button>
</div>

<!-- 該当件数とページングUI -->
<div class="flex justify-between items-center mb-2">
  <div id="resultCount" class="text-sm text-gray-600"></div>
  <div id="pagination" class="flex gap-2 items-center"></div>
</div>

<!-- 結果表示テーブル -->
<div class="overflow-x-auto bg-white p-2 rounded shadow border border-gray-200">
  <table id="resultsTable" class="min-w-full table-fixed border-collapse">
    <thead class="bg-gray-100 text-sm">
      <tr>
        <th class="border px-2 py-1 w-48">事業所名</th>
        <th class="border px-2 py-1 w-40">サービス種類</th>
        <th class="border px-2 py-1 w-32">電話番号</th>
        <th class="border px-2 py-1 w-32">FAX</th>
        <th class="border px-2 py-1 w-48">Email</th>
        <th class="border px-2 py-1 w-64">住所</th>
        <th class="border px-2 py-1 w-32">事業所番号</th>
        <th class="border px-2 py-1 w-48">法人名</th>
        <th class="border px-2 py-1 w-32">URL</th>
      </tr>
    </thead>
    <tbody id="resultsBody" class="text-sm"></tbody>
  </table>
</div>

<script>
// Supabase 初期化
const supabase = window.supabase.createClient(
  'https://udcrfwejohzmhfojnwha.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVkY3Jmd2Vqb2h6bWhmb2pud2hhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU5ODk1NzgsImV4cCI6MjA2MTU2NTU3OH0.dqy_L8iPlbUDoozkha4yjar4ADvinxGc0a6ygSuBLQI'
);

// 都道府県テーブル一覧
const prefectureTables = {
  "北海道": "01_hokkaido",
  "青森県": "02_aomori",
  "岩手県": "03_iwate",
  "宮城県": "04_miyagi",
  "秋田県": "05_akita",
  "山形県": "06_yamagata",
  "福島県": "07_fukushima",
  "茨城県": "08_ibaraki",
  "栃木県": "09_tochigi",
  "群馬県": "10_gunma",
  "埼玉県": "11_saitama",
  "千葉県": "12_chiba",
  "東京都": "13_tokyo",
  "神奈川県": "14_kanagawa",
  "新潟県": "15_niigata",
  "富山県": "16_toyama",
  "石川県": "17_ishikawa",
  "福井県": "18_fukui",
  "山梨県": "19_yamanashi",
  "長野県": "20_nagano",
  "岐阜県": "21_gifu",
  "静岡県": "22_shizuoka",
  "愛知県": "23_aichi",
  "三重県": "24_mie",
  "滋賀県": "25_shiga",
  "京都府": "26_kyoto",
  "大阪府": "27_osaka",
  "兵庫県": "28_hyogo",
  "奈良県": "29_nara",
  "和歌山県": "30_wakayama",
  "鳥取県": "31_tottori",
  "島根県": "32_shimane",
  "岡山県": "33_okayama",
  "広島県": "34_hiroshima",
  "山口県": "35_yamaguchi",
  "徳島県": "36_tokushima",
  "香川県": "37_kagawa",
  "愛媛県": "38_ehime",
  "高知県": "39_kochi",
  "福岡県": "40_fukuoka",
  "佐賀県": "41_saga",
  "長崎県": "42_nagasaki",
  "熊本県": "43_kumamoto",
  "大分県": "44_oita",
  "宮崎県": "45_miyazaki",
  "鹿児島県": "46_kagoshima",
  "沖縄県": "47_okinawa"
};

// 続くコードは後で分割処理や読み込み処理のJSを含めて補完します
</script>
